"use strict";(()=>{var An=Object.create;var Bt=Object.defineProperty;var Sn=Object.getOwnPropertyDescriptor;var Tn=Object.getOwnPropertyNames;var _n=Object.getPrototypeOf,En=Object.prototype.hasOwnProperty;var Kt=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Cn=(r,e,n,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of Tn(e))!En.call(r,t)&&t!==n&&Bt(r,t,{get:()=>e[t],enumerable:!(a=Sn(e,t))||a.enumerable});return r};var ae=(r,e,n)=>(n=r!=null?An(_n(r)):{},Cn(e||!r||!r.__esModule?Bt(n,"default",{value:r,enumerable:!0}):n,r));var oe=Kt((rt,Ft)=>{(function(r,e){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],e);else if(typeof rt<"u")e(Ft);else{var n={exports:{}};e(n),r.browser=n.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:rt,function(r){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){let e="The message port closed before a response was received.",n=a=>{let t={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(t).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class o extends WeakMap{constructor(y,v=void 0){super(v),this.createItem=y}get(y){return this.has(y)||this.set(y,this.createItem(y)),super.get(y)}}let i=g=>g&&typeof g=="object"&&typeof g.then=="function",s=(g,y)=>(...v)=>{a.runtime.lastError?g.reject(new Error(a.runtime.lastError.message)):y.singleCallbackArg||v.length<=1&&y.singleCallbackArg!==!1?g.resolve(v[0]):g.resolve(v)},l=g=>g==1?"argument":"arguments",p=(g,y)=>function(A,...E){if(E.length<y.minArgs)throw new Error(`Expected at least ${y.minArgs} ${l(y.minArgs)} for ${g}(), got ${E.length}`);if(E.length>y.maxArgs)throw new Error(`Expected at most ${y.maxArgs} ${l(y.maxArgs)} for ${g}(), got ${E.length}`);return new Promise((C,P)=>{if(y.fallbackToNoCallback)try{A[g](...E,s({resolve:C,reject:P},y))}catch{A[g](...E),y.fallbackToNoCallback=!1,y.noCallback=!0,C()}else y.noCallback?(A[g](...E),C()):A[g](...E,s({resolve:C,reject:P},y))})},f=(g,y,v)=>new Proxy(y,{apply(A,E,C){return v.call(E,g,...C)}}),u=Function.call.bind(Object.prototype.hasOwnProperty),d=(g,y={},v={})=>{let A=Object.create(null),E={has(P,T){return T in g||T in A},get(P,T,k){if(T in A)return A[T];if(!(T in g))return;let O=g[T];if(typeof O=="function")if(typeof y[T]=="function")O=f(g,g[T],y[T]);else if(u(v,T)){let D=p(T,v[T]);O=f(g,g[T],D)}else O=O.bind(g);else if(typeof O=="object"&&O!==null&&(u(y,T)||u(v,T)))O=d(O,y[T],v[T]);else if(u(v,"*"))O=d(O,y[T],v["*"]);else return Object.defineProperty(A,T,{configurable:!0,enumerable:!0,get(){return g[T]},set(D){g[T]=D}}),O;return A[T]=O,O},set(P,T,k,O){return T in A?A[T]=k:g[T]=k,!0},defineProperty(P,T,k){return Reflect.defineProperty(A,T,k)},deleteProperty(P,T){return Reflect.deleteProperty(A,T)}},C=Object.create(g);return new Proxy(C,E)},m=g=>({addListener(y,v,...A){y.addListener(g.get(v),...A)},hasListener(y,v){return y.hasListener(g.get(v))},removeListener(y,v){y.removeListener(g.get(v))}}),b=new o(g=>typeof g!="function"?g:function(v){let A=d(v,{},{getContent:{minArgs:0,maxArgs:0}});g(A)}),S=new o(g=>typeof g!="function"?g:function(v,A,E){let C=!1,P,T=new Promise(Q=>{P=function(j){C=!0,Q(j)}}),k;try{k=g(v,A,P)}catch(Q){k=Promise.reject(Q)}let O=k!==!0&&i(k);if(k!==!0&&!O&&!C)return!1;let D=Q=>{Q.then(j=>{E(j)},j=>{let z;j&&(j instanceof Error||typeof j.message=="string")?z=j.message:z="An unexpected error occurred",E({__mozWebExtensionPolyfillReject__:!0,message:z})}).catch(j=>{})};return D(O?k:T),!0}),w=({reject:g,resolve:y},v)=>{a.runtime.lastError?a.runtime.lastError.message===e?y():g(new Error(a.runtime.lastError.message)):v&&v.__mozWebExtensionPolyfillReject__?g(new Error(v.message)):y(v)},h=(g,y,v,...A)=>{if(A.length<y.minArgs)throw new Error(`Expected at least ${y.minArgs} ${l(y.minArgs)} for ${g}(), got ${A.length}`);if(A.length>y.maxArgs)throw new Error(`Expected at most ${y.maxArgs} ${l(y.maxArgs)} for ${g}(), got ${A.length}`);return new Promise((E,C)=>{let P=w.bind(null,{resolve:E,reject:C});A.push(P),v.sendMessage(...A)})},x={devtools:{network:{onRequestFinished:m(b)}},runtime:{onMessage:m(S),onMessageExternal:m(S),sendMessage:h.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:h.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},_={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return t.privacy={network:{"*":_},services:{"*":_},websites:{"*":_}},d(a,x,t)};r.exports=n(chrome)}else r.exports=globalThis.browser})});var Xr=Kt((fu,Ke)=>{(function(){"use strict";var r={}.hasOwnProperty;function e(){for(var t="",o=0;o<arguments.length;o++){var i=arguments[o];i&&(t=a(t,n(i)))}return t}function n(t){if(typeof t=="string"||typeof t=="number")return t;if(typeof t!="object")return"";if(Array.isArray(t))return e.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var o="";for(var i in t)r.call(t,i)&&t[i]&&(o=a(o,i));return o}function a(t,o){return o?t?t+" "+o:t+o:t}typeof Ke<"u"&&Ke.exports?(e.default=e,Ke.exports=e):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return e}):window.classNames=e})()});var M=ae(oe());var ke=ae(oe());var On=typeof global=="object"&&global&&global.Object===Object&&global,Ut=On;var Pn=typeof self=="object"&&self&&self.Object===Object&&self,kn=Ut||Pn||Function("return this")(),X=kn;var Nn=X.Symbol,ie=Nn;var Gt=Object.prototype,Rn=Gt.hasOwnProperty,In=Gt.toString,xe=ie?ie.toStringTag:void 0;function Mn(r){var e=Rn.call(r,xe),n=r[xe];try{r[xe]=void 0;var a=!0}catch{}var t=In.call(r);return a&&(e?r[xe]=n:delete r[xe]),t}var Ht=Mn;var Ln=Object.prototype,jn=Ln.toString;function Dn(r){return jn.call(r)}var $t=Dn;var Bn="[object Null]",Kn="[object Undefined]",Wt=ie?ie.toStringTag:void 0;function Fn(r){return r==null?r===void 0?Kn:Bn:Wt&&Wt in Object(r)?Ht(r):$t(r)}var Ee=Fn;function Un(r){return r!=null&&typeof r=="object"}var zt=Un;var Gn="[object Symbol]";function Hn(r){return typeof r=="symbol"||zt(r)&&Ee(r)==Gn}var Vt=Hn;var $n=/\s/;function Wn(r){for(var e=r.length;e--&&$n.test(r.charAt(e)););return e}var qt=Wn;var zn=/^\s+/;function Vn(r){return r&&r.slice(0,qt(r)+1).replace(zn,"")}var Jt=Vn;function qn(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var V=qn;var Qt=NaN,Jn=/^[-+]0x[0-9a-f]+$/i,Qn=/^0b[01]+$/i,Xn=/^0o[0-7]+$/i,Yn=parseInt;function Zn(r){if(typeof r=="number")return r;if(Vt(r))return Qt;if(V(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=V(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=Jt(r);var n=Qn.test(r);return n||Xn.test(r)?Yn(r.slice(2),n?2:8):Jn.test(r)?Qt:+r}var nt=Zn;var ea="[object AsyncFunction]",ta="[object Function]",ra="[object GeneratorFunction]",na="[object Proxy]";function aa(r){if(!V(r))return!1;var e=Ee(r);return e==ta||e==ra||e==ea||e==na}var Xt=aa;var oa=X["__core-js_shared__"],Ce=oa;var Yt=function(){var r=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function ia(r){return!!Yt&&Yt in r}var Zt=ia;var sa=Function.prototype,la=sa.toString;function ua(r){if(r!=null){try{return la.call(r)}catch{}try{return r+""}catch{}}return""}var er=ua;var fa=/[\\^$.*+?()[\]{}|]/g,ca=/^\[object .+?Constructor\]$/,pa=Function.prototype,da=Object.prototype,ma=pa.toString,ga=da.hasOwnProperty,ha=RegExp("^"+ma.call(ga).replace(fa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xa(r){if(!V(r)||Zt(r))return!1;var e=Xt(r)?ha:ca;return e.test(er(r))}var tr=xa;function ya(r,e){return r?.[e]}var rr=ya;function va(r,e){var n=rr(r,e);return tr(n)?n:void 0}var Oe=va;function ba(r,e){return r===e||r!==r&&e!==e}var nr=ba;var wa=Oe(Object,"create"),q=wa;function Aa(){this.__data__=q?q(null):{},this.size=0}var ar=Aa;function Sa(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var or=Sa;var Ta="__lodash_hash_undefined__",_a=Object.prototype,Ea=_a.hasOwnProperty;function Ca(r){var e=this.__data__;if(q){var n=e[r];return n===Ta?void 0:n}return Ea.call(e,r)?e[r]:void 0}var ir=Ca;var Oa=Object.prototype,Pa=Oa.hasOwnProperty;function ka(r){var e=this.__data__;return q?e[r]!==void 0:Pa.call(e,r)}var sr=ka;var Na="__lodash_hash_undefined__";function Ra(r,e){var n=this.__data__;return this.size+=this.has(r)?0:1,n[r]=q&&e===void 0?Na:e,this}var lr=Ra;function se(r){var e=-1,n=r==null?0:r.length;for(this.clear();++e<n;){var a=r[e];this.set(a[0],a[1])}}se.prototype.clear=ar;se.prototype.delete=or;se.prototype.get=ir;se.prototype.has=sr;se.prototype.set=lr;var at=se;function Ia(){this.__data__=[],this.size=0}var ur=Ia;function Ma(r,e){for(var n=r.length;n--;)if(nr(r[n][0],e))return n;return-1}var Y=Ma;var La=Array.prototype,ja=La.splice;function Da(r){var e=this.__data__,n=Y(e,r);if(n<0)return!1;var a=e.length-1;return n==a?e.pop():ja.call(e,n,1),--this.size,!0}var fr=Da;function Ba(r){var e=this.__data__,n=Y(e,r);return n<0?void 0:e[n][1]}var cr=Ba;function Ka(r){return Y(this.__data__,r)>-1}var pr=Ka;function Fa(r,e){var n=this.__data__,a=Y(n,r);return a<0?(++this.size,n.push([r,e])):n[a][1]=e,this}var dr=Fa;function le(r){var e=-1,n=r==null?0:r.length;for(this.clear();++e<n;){var a=r[e];this.set(a[0],a[1])}}le.prototype.clear=ur;le.prototype.delete=fr;le.prototype.get=cr;le.prototype.has=pr;le.prototype.set=dr;var mr=le;var Ua=Oe(X,"Map"),gr=Ua;function Ga(){this.size=0,this.__data__={hash:new at,map:new(gr||mr),string:new at}}var hr=Ga;function Ha(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}var xr=Ha;function $a(r,e){var n=r.__data__;return xr(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Z=$a;function Wa(r){var e=Z(this,r).delete(r);return this.size-=e?1:0,e}var yr=Wa;function za(r){return Z(this,r).get(r)}var vr=za;function Va(r){return Z(this,r).has(r)}var br=Va;function qa(r,e){var n=Z(this,r),a=n.size;return n.set(r,e),this.size+=n.size==a?0:1,this}var wr=qa;function ue(r){var e=-1,n=r==null?0:r.length;for(this.clear();++e<n;){var a=r[e];this.set(a[0],a[1])}}ue.prototype.clear=hr;ue.prototype.delete=yr;ue.prototype.get=vr;ue.prototype.has=br;ue.prototype.set=wr;var ot=ue;var Ja="Expected a function";function it(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(Ja);var n=function(){var a=arguments,t=e?e.apply(this,a):a[0],o=n.cache;if(o.has(t))return o.get(t);var i=r.apply(this,a);return n.cache=o.set(t,i)||o,i};return n.cache=new(it.Cache||ot),n}it.Cache=ot;var st=it;var Qa=function(){return X.Date.now()},Pe=Qa;var Xa="Expected a function",Ya=Math.max,Za=Math.min;function eo(r,e,n){var a,t,o,i,s,l,p=0,f=!1,u=!1,d=!0;if(typeof r!="function")throw new TypeError(Xa);e=nt(e)||0,V(n)&&(f=!!n.leading,u="maxWait"in n,o=u?Ya(nt(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d);function m(v){var A=a,E=t;return a=t=void 0,p=v,i=r.apply(E,A),i}function b(v){return p=v,s=setTimeout(h,e),f?m(v):i}function S(v){var A=v-l,E=v-p,C=e-A;return u?Za(C,o-E):C}function w(v){var A=v-l,E=v-p;return l===void 0||A>=e||A<0||u&&E>=o}function h(){var v=Pe();if(w(v))return x(v);s=setTimeout(h,S(v))}function x(v){return s=void 0,d&&a?m(v):(a=t=void 0,i)}function _(){s!==void 0&&clearTimeout(s),p=0,a=l=t=s=void 0}function g(){return s===void 0?i:x(Pe())}function y(){var v=Pe(),A=w(v);if(a=arguments,t=this,l=v,A){if(s===void 0)return b(l);if(u)return clearTimeout(s),s=setTimeout(h,e),m(l)}return s===void 0&&(s=setTimeout(h,e)),i}return y.cancel=_,y.flush=g,y}var ye=eo;var Sr=ae(oe());var lt=Sr.default.runtime.getManifest(),Xs=lt.version_name===lt.version+"-e";var Ys=lt.version;var to={dev:"https://dev.wisehood.ai",test:"https://dev.wisehood.ai",preview:"https://preview.sider.ai",prod:"https://sider.ai"},ro={dev:"wisehood.ai",test:"wisehood.ai",preview:"sider.ai",prod:"sider.ai"},Ar=to.prod,Tr={origin:Ar,api:`${Ar}/api`,domain:ro.prod};var ut=(c=>(c.English="en",c["Chinese(Simplified)"]="zh_CN",c["Chinese(Traditional)"]="zh_TW",c.Spanish="es",c.French="fr",c.Japanese="ja",c.German="de",c.Portuguese="pt",c.Arabic="ar",c.Russian="ru",c.Italian="it",c.Korean="ko",c.Hindi="hi",c.Dutch="nl",c.Polish="pl",c.Amharic="am",c.Bulgarian="bg",c.Bengali="bn",c.Catalan="ca",c.Czech="cs",c.Danish="da",c.Greek="el",c.Estonian="et",c.Persian="fa",c.Finnish="fi",c.Filipino="fil",c.Gujarati="gu",c.Hebrew="he",c.Croatian="hr",c.Hungarian="hu",c.Indonesian="id",c.Kannada="kn",c.Lithuanian="lt",c.Latvian="lv",c.Malayalam="ml",c.Marathi="mr",c.Malay="ms",c.Norwegian="no",c.Romanian="ro",c.Slovak="sk",c.Slovenian="sl",c.Serbian="sr",c.Swedish="sv",c.Swahili="sw",c.Tamil="ta",c.Telugu="te",c.Thai="th",c.Turkish="tr",c.Ukrainian="uk",c.Urdu="ur",c.Vietnamese="vi",c))(ut||{}),_r=(c=>(c.English="en",c["English (Australia)"]="en_AU",c["English (Canada)"]="en_CA",c["English (India)"]="en_IN",c["English (UK)"]="en_UK",c["English (US)"]="en_US",c["Chinese (Simplified)"]="zh_CN",c["Chinese (Traditional)"]="zh_TW",c.Spanish="es",c["Spanish (Argentina)"]="es_AR",c["Spanish (Colombia)"]="es_CO",c["Spanish (Spain)"]="es_ES",c["Spanish (Mexico)"]="es_MX",c.French="fr",c.Japanese="ja",c.German="de",c.Portuguese="pt",c.Arabic="ar",c["Arabic (Egypt)"]="ar_EG",c["Arabic (Saudi)"]="ar_SA",c.Russian="ru",c.Italian="it",c.Korean="ko",c.Hindi="hi",c.Dutch="nl",c.Polish="pl",c["Portuguese (Brazil)"]="pt_BR",c["Portuguese (Portugal)"]="pt_PT",c.Amharic="am",c.Bengali="bn",c.Bulgarian="bg",c.Catalan="ca",c.Croatian="hr",c.Czech="cs",c.Danish="da",c.Estonian="et",c.Filipino="fil",c.Finnish="fi",c.Greek="el",c.Gujarati="gu",c.Hebrew="he",c.Hungarian="hu",c.Indonesian="id",c.Kannada="kn",c.Latvian="lv",c.Lithuanian="lt",c.Malay="ms",c.Malayalam="ml",c.Marathi="mr",c.Norwegian="no",c.Persian="fa",c.Romanian="ro",c.Serbian="sr",c.Slovak="sk",c.Slovenian="sl",c.Swahili="sw",c.Swedish="sv",c.Tamil="ta",c.Telugu="te",c.Thai="th",c.Turkish="tr",c.Ukrainian="uk",c.Urdu="ur",c.Vietnamese="vi",c))(_r||{}),Er={en:"English",zh_CN:"\u4E2D\u6587(\u7B80\u4F53)",zh_TW:"\u4E2D\u6587(\u7E41\u9AD4)",es:"Espa\xF1ol",fr:"Fran\xE7ais",ja:"\u65E5\u672C\u8A9E",de:"Deutsch",pt:"Portugu\xEAs",ar:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629",ru:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",it:"Italiano",ko:"\uD55C\uAD6D\uC5B4",hi:"\u0939\u093F\u0928\u094D\u0926\u0940",nl:"Nederlands",pl:"Polski",am:"\u12A0\u121B\u122D\u129B",bg:"\u0411\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438",bn:"\u09AC\u09BE\u0982\u09B2\u09BE",ca:"Catal\xE0",cs:"\u010Ce\u0161tina",da:"Dansk",el:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC",et:"Eesti",fa:"\u0641\u0627\u0631\u0633\u06CC",fi:"Suomi",fil:"Filipino",gu:"\u0A97\u0AC1\u0A9C\u0AB0\u0ABE\u0AA4\u0AC0",he:"\u05E2\u05D1\u05E8\u05D9\u05EA",hr:"Hrvatski",hu:"Magyar",id:"Indonesia",kn:"\u0C95\u0CA8\u0CCD\u0CA8\u0CA1",lt:"Lietuvi\u0173",lv:"Latvie\u0161u",ml:"\u0D2E\u0D32\u0D2F\u0D3E\u0D33\u0D02",mr:"\u092E\u0930\u093E\u0920\u0940",ms:"Melayu",no:"Norsk",ro:"Rom\xE2n\u0103",sk:"Sloven\u010Dina",sl:"Sloven\u0161\u010Dina",sr:"\u0421\u0440\u043F\u0441\u043A\u0438",sv:"Svenska",sw:"Kiswahili",ta:"\u0BA4\u0BAE\u0BBF\u0BB4\u0BCD",te:"\u0C24\u0C46\u0C32\u0C41\u0C17\u0C41",th:"\u0E44\u0E17\u0E22",tr:"T\xFCrk\xE7e",uk:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430",ur:"\u0627\u0631\u062F\u0648",vi:"Ti\u1EBFng Vi\u1EC7t"},no={en:"English",en_AU:"English (Australia)",en_CA:"English (Canada)",en_IN:"English (India)",en_UK:"English (UK)",en_US:"English (US)",zh_CN:"\u4E2D\u6587(\u7B80\u4F53)",zh_TW:"\u4E2D\u6587(\u7E41\u9AD4)",es:"Espa\xF1ol",es_AR:"Espa\xF1ol (Argentina)",es_CO:"Espa\xF1ol (Colombia)",es_ES:"Espa\xF1ol (Spain)",es_MX:"Espa\xF1ol (Mexico)",fr:"Fran\xE7ais",ja:"\u65E5\u672C\u8A9E",de:"Deutsch",pt:"Portugu\xEAs",ar:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629",ar_EG:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629 (Egypt)",ar_SA:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629 (Saudi)",ru:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",it:"Italiano",ko:"\uD55C\uAD6D\uC5B4",hi:"\u0939\u093F\u0928\u094D\u0926\u0940",nl:"Nederlands",pl:"Polski",pt_BR:"Portugu\xEAs (Brazil)",pt_PT:"Portugu\xEAs (Portugal)",am:"\u12A0\u121B\u122D\u129B",bn:"\u09AC\u09BE\u0982\u09B2\u09BE",bg:"\u0411\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438",ca:"Catal\xE0",hr:"Hrvatski",cs:"\u010Ce\u0161tina",da:"Dansk",et:"Eesti",fil:"Filipino",fi:"Suomi",el:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC",gu:"\u0A97\u0AC1\u0A9C\u0AB0\u0ABE\u0AA4\u0AC0",he:"\u05E2\u05D1\u05E8\u05D9\u05EA",hu:"Magyar",id:"Indonesia",kn:"\u0C95\u0CA8\u0CCD\u0CA8\u0CA1",lv:"Latvie\u0161u",lt:"Lietuvi\u0173",ms:"Melayu",ml:"\u0D2E\u0D32\u0D2F\u0D3E\u0D33\u0D02",mr:"\u092E\u0930\u093E\u0920\u0940",no:"Norsk",fa:"\u0641\u0627\u0631\u0633\u06CC",ro:"Rom\xE2n\u0103",sr:"\u0421\u0440\u043F\u0441\u043A\u0438",sk:"Sloven\u010Dina",sl:"Sloven\u0161\u010Dina",sw:"Kiswahili",sv:"Svenska",ta:"\u0BA4\u0BAE\u0BBF\u0BB4\u0BCD",te:"\u0C24\u0C46\u0C32\u0C41\u0C17\u0C41",th:"\u0E44\u0E17\u0E22",tr:"T\xFCrk\xE7e",uk:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430",ur:"\u0627\u0631\u062F\u0648",vi:"Ti\u1EBFng Vi\u1EC7t"},Zs=Object.entries(ut).reduce((r,[e,n])=>(r[n]=e,r),{}),el=Object.entries(ut).map(([r,e])=>({label:r,value:e,name:Er[e]})),tl=Object.entries(_r).map(([r,e])=>({label:r,value:e,name:no[e]})),rl=Object.entries(Er).map(([r,e])=>({label:e,value:r}));var ao="provider:siderApi",nl=`${ao}:SelectedModels`;var al={login:`${Tr.origin}/login`,openaiChat:"https://chat.openai.com",openaiLogin:"https://platform.openai.com/login",openaiSignup:"https://platform.openai.com/signup",openaiApiKey:"https://platform.openai.com/account/api-keys",openaiApiSession:"https://chat.openai.com/api/auth/session",edgeStore:"https://microsoftedge.microsoft.com/addons/detail/sider-ai-sidebar/dhoenijjpgpeimemopealfcbiecgceod",chromeStore:"https://chromewebstore.google.com/detail/sider-chatgpt-sidebar-+-v/difoiogjjojoaoomphldepapgpbgkhkb",chromeStoreReview:"https://chromewebstore.google.com/detail/sider-chatgpt-sidebar-+-v/difoiogjjojoaoomphldepapgpbgkhkb/reviews",weChatQrCode:"https://sider.ai/resource/weixin/qrcode.jpeg",producthuntPromoteApi:"https://sider.ai/resource/promotion/extension-promote.json",promoteConfigApi:"https://sider.ai/resource/promotion/promote-config.json"},ft={sidebarShortcut:{key:"p",keyCode:80,metaKey:!0,ctrlKey:!0,altKey:!1,shiftKey:!1},sidebarFab:!0,selectionSidebarFab:!0};var ct={key:"j",keyCode:74,metaKey:!0,ctrlKey:!0,altKey:!1,shiftKey:!1};var ol=1024*1024*10,il=1024*1024*100;async function Cr(r){return ke.default.storage.local.set(r)}async function pt(r,e){let n=await ke.default.storage.local.get(r);return typeof r=="string"?Object.hasOwn(n,r)?n[r]:e:n}function Ne({type:r,data:e}){return ke.default.runtime.sendMessage({type:"FORWARD_MSG",subtype:r,data:e})}function Or(r,e){return r.type==="FORWARD_MSG"&&r.subtype?r.subtype===e:r.type===e}function dt(r,e){return!(r.key!==e.key||(r.metaKey!==e.metaKey||r.ctrlKey!==e.ctrlKey)&&!r.metaKey&&!r.ctrlKey||r.shiftKey!==!!e.shiftKey||r.altKey!==!!e.altKey||r.target?.dataset.preventsidershortcut)}function N(r){"@babel/helpers - typeof";return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(r)}function B(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function mt(r,e){if(N(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var a=n.call(r,e||"default");if(N(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function ve(r){var e=mt(r,"string");return N(e)=="symbol"?e:String(e)}function Pr(r,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,ve(a.key),a)}}function K(r,e,n){return e&&Pr(r.prototype,e),n&&Pr(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function U(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function be(r,e){return be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,t){return a.__proto__=t,a},be(r,e)}function fe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&be(r,e)}function te(r,e){if(e&&(N(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U(r)}function F(r){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},F(r)}function H(r,e,n){return e=ve(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function gt(r){if(Array.isArray(r))return r}function ht(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Re(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=r[n];return a}function xt(r,e){if(r){if(typeof r=="string")return Re(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Re(r,e)}}function yt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vt(r){return gt(r)||ht(r)||xt(r)||yt()}function kr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);e&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,a)}return n}function Nr(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kr(Object(n),!0).forEach(function(a){H(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}var oo={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,n){console&&console[e]}},io=function(){function r(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};B(this,r),this.init(e,n)}return K(r,[{key:"init",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=a.prefix||"i18next:",this.logger=n||oo,this.options=a,this.debug=a.debug}},{key:"setDebug",value:function(n){this.debug=n}},{key:"log",value:function(){for(var n=arguments.length,a=new Array(n),t=0;t<n;t++)a[t]=arguments[t];return this.forward(a,"log","",!0)}},{key:"warn",value:function(){for(var n=arguments.length,a=new Array(n),t=0;t<n;t++)a[t]=arguments[t];return this.forward(a,"warn","",!0)}},{key:"error",value:function(){for(var n=arguments.length,a=new Array(n),t=0;t<n;t++)a[t]=arguments[t];return this.forward(a,"error","")}},{key:"deprecate",value:function(){for(var n=arguments.length,a=new Array(n),t=0;t<n;t++)a[t]=arguments[t];return this.forward(a,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(n,a,t,o){return o&&!this.debug?null:(typeof n[0]=="string"&&(n[0]="".concat(t).concat(this.prefix," ").concat(n[0])),this.logger[a](n))}},{key:"create",value:function(n){return new r(this.logger,Nr(Nr({},{prefix:"".concat(this.prefix,":").concat(n,":")}),this.options))}},{key:"clone",value:function(n){return n=n||this.options,n.prefix=n.prefix||this.prefix,new r(this.logger,n)}}]),r}(),W=new io,ee=function(){function r(){B(this,r),this.observers={}}return K(r,[{key:"on",value:function(n,a){var t=this;return n.split(" ").forEach(function(o){t.observers[o]=t.observers[o]||[],t.observers[o].push(a)}),this}},{key:"off",value:function(n,a){if(this.observers[n]){if(!a){delete this.observers[n];return}this.observers[n]=this.observers[n].filter(function(t){return t!==a})}}},{key:"emit",value:function(n){for(var a=arguments.length,t=new Array(a>1?a-1:0),o=1;o<a;o++)t[o-1]=arguments[o];if(this.observers[n]){var i=[].concat(this.observers[n]);i.forEach(function(l){l.apply(void 0,t)})}if(this.observers["*"]){var s=[].concat(this.observers["*"]);s.forEach(function(l){l.apply(l,[n].concat(t))})}}}]),r}();function we(){var r,e,n=new Promise(function(a,t){r=a,e=t});return n.resolve=r,n.reject=e,n}function Rr(r){return r==null?"":""+r}function so(r,e,n){r.forEach(function(a){e[a]&&(n[a]=e[a])})}function wt(r,e,n){function a(s){return s&&s.indexOf("###")>-1?s.replace(/###/g,"."):s}function t(){return!r||typeof r=="string"}for(var o=typeof e!="string"?[].concat(e):e.split(".");o.length>1;){if(t())return{};var i=a(o.shift());!r[i]&&n&&(r[i]=new n),Object.prototype.hasOwnProperty.call(r,i)?r=r[i]:r={}}return t()?{}:{obj:r,k:a(o.shift())}}function Ir(r,e,n){var a=wt(r,e,Object),t=a.obj,o=a.k;t[o]=n}function lo(r,e,n,a){var t=wt(r,e,Object),o=t.obj,i=t.k;o[i]=o[i]||[],a&&(o[i]=o[i].concat(n)),a||o[i].push(n)}function Le(r,e){var n=wt(r,e),a=n.obj,t=n.k;if(a)return a[t]}function uo(r,e,n){var a=Le(r,n);return a!==void 0?a:Le(e,n)}function qr(r,e,n){for(var a in e)a!=="__proto__"&&a!=="constructor"&&(a in r?typeof r[a]=="string"||r[a]instanceof String||typeof e[a]=="string"||e[a]instanceof String?n&&(r[a]=e[a]):qr(r[a],e[a],n):r[a]=e[a]);return r}function ce(r){return r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var fo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function co(r){return typeof r=="string"?r.replace(/[&<>"'\/]/g,function(e){return fo[e]}):r}var Be=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,po=[" ",",","?","!",";"];function mo(r,e,n){e=e||"",n=n||"";var a=po.filter(function(s){return e.indexOf(s)<0&&n.indexOf(s)<0});if(a.length===0)return!0;var t=new RegExp("(".concat(a.map(function(s){return s==="?"?"\\?":s}).join("|"),")")),o=!t.test(r);if(!o){var i=r.indexOf(n);i>0&&!t.test(r.substring(0,i))&&(o=!0)}return o}function je(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(r){if(r[e])return r[e];for(var a=e.split(n),t=r,o=0;o<a.length;++o){if(!t||typeof t[a[o]]=="string"&&o+1<a.length)return;if(t[a[o]]===void 0){for(var i=2,s=a.slice(o,o+i).join(n),l=t[s];l===void 0&&a.length>o+i;)i++,s=a.slice(o,o+i).join(n),l=t[s];if(l===void 0)return;if(l===null)return null;if(e.endsWith(s)){if(typeof l=="string")return l;if(s&&typeof l[s]=="string")return l[s]}var p=a.slice(o+i).join(n);return p?je(l,p,n):void 0}t=t[a[o]]}return t}}function Mr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);e&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,a)}return n}function Ie(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mr(Object(n),!0).forEach(function(a){H(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}function go(r){var e=ho();return function(){var a=F(r),t;if(e){var o=F(this).constructor;t=Reflect.construct(a,arguments,o)}else t=a.apply(this,arguments);return te(this,t)}}function ho(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var xo=function(r){fe(n,r);var e=go(n);function n(a){var t,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return B(this,n),t=e.call(this),Be&&ee.call(U(t)),t.data=a||{},t.options=o,t.options.keySeparator===void 0&&(t.options.keySeparator="."),t.options.ignoreJSONStructure===void 0&&(t.options.ignoreJSONStructure=!0),t}return K(n,[{key:"addNamespaces",value:function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}},{key:"removeNamespaces",value:function(t){var o=this.options.ns.indexOf(t);o>-1&&this.options.ns.splice(o,1)}},{key:"getResource",value:function(t,o,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,p=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure,f=[t,o];i&&typeof i!="string"&&(f=f.concat(i)),i&&typeof i=="string"&&(f=f.concat(l?i.split(l):i)),t.indexOf(".")>-1&&(f=t.split("."));var u=Le(this.data,f);return u||!p||typeof i!="string"?u:je(this.data&&this.data[t]&&this.data[t][o],i,l)}},{key:"addResource",value:function(t,o,i,s){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},p=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,f=[t,o];i&&(f=f.concat(p?i.split(p):i)),t.indexOf(".")>-1&&(f=t.split("."),s=o,o=f[1]),this.addNamespaces(o),Ir(this.data,f,s),l.silent||this.emit("added",t,o,i,s)}},{key:"addResources",value:function(t,o,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var l in i)(typeof i[l]=="string"||Object.prototype.toString.apply(i[l])==="[object Array]")&&this.addResource(t,o,l,i[l],{silent:!0});s.silent||this.emit("added",t,o,i)}},{key:"addResourceBundle",value:function(t,o,i,s,l){var p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},f=[t,o];t.indexOf(".")>-1&&(f=t.split("."),s=i,i=o,o=f[1]),this.addNamespaces(o);var u=Le(this.data,f)||{};s?qr(u,i,l):u=Ie(Ie({},u),i),Ir(this.data,f,u),p.silent||this.emit("added",t,o,i)}},{key:"removeResourceBundle",value:function(t,o){this.hasResourceBundle(t,o)&&delete this.data[t][o],this.removeNamespaces(o),this.emit("removed",t,o)}},{key:"hasResourceBundle",value:function(t,o){return this.getResource(t,o)!==void 0}},{key:"getResourceBundle",value:function(t,o){return o||(o=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Ie(Ie({},{}),this.getResource(t,o)):this.getResource(t,o)}},{key:"getDataByLanguage",value:function(t){return this.data[t]}},{key:"hasLanguageSomeTranslations",value:function(t){var o=this.getDataByLanguage(t),i=o&&Object.keys(o)||[];return!!i.find(function(s){return o[s]&&Object.keys(o[s]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),n}(ee),Jr={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,n,a,t,o){var i=this;return e.forEach(function(s){i.processors[s]&&(n=i.processors[s].process(n,a,t,o))}),n}};function Lr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);e&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,a)}return n}function R(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lr(Object(n),!0).forEach(function(a){H(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Lr(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}function yo(r){var e=vo();return function(){var a=F(r),t;if(e){var o=F(this).constructor;t=Reflect.construct(a,arguments,o)}else t=a.apply(this,arguments);return te(this,t)}}function vo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var jr={},Dr=function(r){fe(n,r);var e=yo(n);function n(a){var t,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return B(this,n),t=e.call(this),Be&&ee.call(U(t)),so(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],a,U(t)),t.options=o,t.options.keySeparator===void 0&&(t.options.keySeparator="."),t.logger=W.create("translator"),t}return K(n,[{key:"changeLanguage",value:function(t){t&&(this.language=t)}},{key:"exists",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;var i=this.resolve(t,o);return i&&i.res!==void 0}},{key:"extractFromKey",value:function(t,o){var i=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");var s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,l=o.ns||this.options.defaultNS||[],p=i&&t.indexOf(i)>-1,f=!this.options.userDefinedKeySeparator&&!o.keySeparator&&!this.options.userDefinedNsSeparator&&!o.nsSeparator&&!mo(t,i,s);if(p&&!f){var u=t.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:t,namespaces:l};var d=t.split(i);(i!==s||i===s&&this.options.ns.indexOf(d[0])>-1)&&(l=d.shift()),t=d.join(s)}return typeof l=="string"&&(l=[l]),{key:t,namespaces:l}}},{key:"translate",value:function(t,o,i){var s=this;if(N(o)!=="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),N(o)==="object"&&(o=R({},o)),o||(o={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);var l=o.returnDetails!==void 0?o.returnDetails:this.options.returnDetails,p=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,f=this.extractFromKey(t[t.length-1],o),u=f.key,d=f.namespaces,m=d[d.length-1],b=o.lng||this.language,S=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(b&&b.toLowerCase()==="cimode"){if(S){var w=o.nsSeparator||this.options.nsSeparator;return l?{res:"".concat(m).concat(w).concat(u),usedKey:u,exactUsedKey:u,usedLng:b,usedNS:m}:"".concat(m).concat(w).concat(u)}return l?{res:u,usedKey:u,exactUsedKey:u,usedLng:b,usedNS:m}:u}var h=this.resolve(t,o),x=h&&h.res,_=h&&h.usedKey||u,g=h&&h.exactUsedKey||u,y=Object.prototype.toString.apply(x),v=["[object Number]","[object Function]","[object RegExp]"],A=o.joinArrays!==void 0?o.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject,C=typeof x!="string"&&typeof x!="boolean"&&typeof x!="number";if(E&&x&&C&&v.indexOf(y)<0&&!(typeof A=="string"&&y==="[object Array]")){if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var P=this.options.returnedObjectHandler?this.options.returnedObjectHandler(_,x,R(R({},o),{},{ns:d})):"key '".concat(u," (").concat(this.language,")' returned an object instead of string.");return l?(h.res=P,h):P}if(p){var T=y==="[object Array]",k=T?[]:{},O=T?g:_;for(var D in x)if(Object.prototype.hasOwnProperty.call(x,D)){var Q="".concat(O).concat(p).concat(D);k[D]=this.translate(Q,R(R({},o),{joinArrays:!1,ns:d})),k[D]===Q&&(k[D]=x[D])}x=k}}else if(E&&typeof A=="string"&&y==="[object Array]")x=x.join(A),x&&(x=this.extendTranslation(x,t,o,i));else{var j=!1,z=!1,Mt=o.count!==void 0&&typeof o.count!="string",Ye=n.hasDefaultValue(o),vn=Mt?this.pluralResolver.getSuffix(b,o.count,o):"",me=o["defaultValue".concat(vn)]||o.defaultValue;!this.isValidLookup(x)&&Ye&&(j=!0,x=me),this.isValidLookup(x)||(z=!0,x=u);var bn=o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,wn=bn&&z?void 0:x,ge=Ye&&me!==x&&this.options.updateMissing;if(z||j||ge){if(this.logger.log(ge?"updateKey":"missingKey",b,m,u,ge?me:x),p){var Lt=this.resolve(u,R(R({},o),{},{keySeparator:!1}));Lt&&Lt.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var he=[],_e=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&_e&&_e[0])for(var Ze=0;Ze<_e.length;Ze++)he.push(_e[Ze]);else this.options.saveMissingTo==="all"?he=this.languageUtils.toResolveHierarchy(o.lng||this.language):he.push(o.lng||this.language);var jt=function(ne,tt,c){var Dt=Ye&&c!==x?c:wn;s.options.missingKeyHandler?s.options.missingKeyHandler(ne,m,tt,Dt,ge,o):s.backendConnector&&s.backendConnector.saveMissing&&s.backendConnector.saveMissing(ne,m,tt,Dt,ge,o),s.emit("missingKey",ne,m,tt,x)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Mt?he.forEach(function(et){s.pluralResolver.getSuffixes(et,o).forEach(function(ne){jt([et],u+ne,o["defaultValue".concat(ne)]||me)})}):jt(he,u,me))}x=this.extendTranslation(x,t,o,h,i),z&&x===u&&this.options.appendNamespaceToMissingKey&&(x="".concat(m,":").concat(u)),(z||j)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(m,":").concat(u):u,j?x:void 0):x=this.options.parseMissingKeyHandler(x))}return l?(h.res=x,h):x}},{key:"extendTranslation",value:function(t,o,i,s,l){var p=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,R(R({},this.options.interpolation.defaultVariables),i),s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init(R(R({},i),{interpolation:R(R({},this.options.interpolation),i.interpolation)}));var f=typeof t=="string"&&(i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),u;if(f){var d=t.match(this.interpolator.nestingRegexp);u=d&&d.length}var m=i.replace&&typeof i.replace!="string"?i.replace:i;if(this.options.interpolation.defaultVariables&&(m=R(R({},this.options.interpolation.defaultVariables),m)),t=this.interpolator.interpolate(t,m,i.lng||this.language,i),f){var b=t.match(this.interpolator.nestingRegexp),S=b&&b.length;u<S&&(i.nest=!1)}!i.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(i.lng=s.usedLng),i.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var x=arguments.length,_=new Array(x),g=0;g<x;g++)_[g]=arguments[g];return l&&l[0]===_[0]&&!i.context?(p.logger.warn("It seems you are nesting recursively key: ".concat(_[0]," in key: ").concat(o[0])),null):p.translate.apply(p,_.concat([o]))},i)),i.interpolation&&this.interpolator.reset()}var w=i.postProcess||this.options.postProcess,h=typeof w=="string"?[w]:w;return t!=null&&h&&h.length&&i.applyPostProcessor!==!1&&(t=Jr.handle(h,t,o,this.options&&this.options.postProcessPassResolved?R({i18nResolved:s},i):i,this)),t}},{key:"resolve",value:function(t){var o=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,l,p,f,u;return typeof t=="string"&&(t=[t]),t.forEach(function(d){if(!o.isValidLookup(s)){var m=o.extractFromKey(d,i),b=m.key;l=b;var S=m.namespaces;o.options.fallbackNS&&(S=S.concat(o.options.fallbackNS));var w=i.count!==void 0&&typeof i.count!="string",h=w&&!i.ordinal&&i.count===0&&o.pluralResolver.shouldUseIntlApi(),x=i.context!==void 0&&(typeof i.context=="string"||typeof i.context=="number")&&i.context!=="",_=i.lngs?i.lngs:o.languageUtils.toResolveHierarchy(i.lng||o.language,i.fallbackLng);S.forEach(function(g){o.isValidLookup(s)||(u=g,!jr["".concat(_[0],"-").concat(g)]&&o.utils&&o.utils.hasLoadedNamespace&&!o.utils.hasLoadedNamespace(u)&&(jr["".concat(_[0],"-").concat(g)]=!0,o.logger.warn('key "'.concat(l,'" for languages "').concat(_.join(", "),`" won't get resolved as namespace "`).concat(u,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),_.forEach(function(y){if(!o.isValidLookup(s)){f=y;var v=[b];if(o.i18nFormat&&o.i18nFormat.addLookupKeys)o.i18nFormat.addLookupKeys(v,b,y,g,i);else{var A;w&&(A=o.pluralResolver.getSuffix(y,i.count,i));var E="".concat(o.options.pluralSeparator,"zero");if(w&&(v.push(b+A),h&&v.push(b+E)),x){var C="".concat(b).concat(o.options.contextSeparator).concat(i.context);v.push(C),w&&(v.push(C+A),h&&v.push(C+E))}}for(var P;P=v.pop();)o.isValidLookup(s)||(p=P,s=o.getResource(y,g,P,i))}}))})}}),{res:s,usedKey:l,exactUsedKey:p,usedLng:f,usedNS:u}}},{key:"isValidLookup",value:function(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}},{key:"getResource",value:function(t,o,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,o,i,s):this.resourceStore.getResource(t,o,i,s)}}],[{key:"hasDefaultValue",value:function(t){var o="defaultValue";for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&o===i.substring(0,o.length)&&t[i]!==void 0)return!0;return!1}}]),n}(ee);function bt(r){return r.charAt(0).toUpperCase()+r.slice(1)}var Br=function(){function r(e){B(this,r),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=W.create("languageUtils")}return K(r,[{key:"getScriptPartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return null;var a=n.split("-");return a.length===2||(a.pop(),a[a.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(a.join("-"))}},{key:"getLanguagePartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return n;var a=n.split("-");return this.formatLanguageCode(a[0])}},{key:"formatLanguageCode",value:function(n){if(typeof n=="string"&&n.indexOf("-")>-1){var a=["hans","hant","latn","cyrl","cans","mong","arab"],t=n.split("-");return this.options.lowerCaseLng?t=t.map(function(o){return o.toLowerCase()}):t.length===2?(t[0]=t[0].toLowerCase(),t[1]=t[1].toUpperCase(),a.indexOf(t[1].toLowerCase())>-1&&(t[1]=bt(t[1].toLowerCase()))):t.length===3&&(t[0]=t[0].toLowerCase(),t[1].length===2&&(t[1]=t[1].toUpperCase()),t[0]!=="sgn"&&t[2].length===2&&(t[2]=t[2].toUpperCase()),a.indexOf(t[1].toLowerCase())>-1&&(t[1]=bt(t[1].toLowerCase())),a.indexOf(t[2].toLowerCase())>-1&&(t[2]=bt(t[2].toLowerCase()))),t.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}},{key:"isSupportedCode",value:function(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}},{key:"getBestMatchFromCodes",value:function(n){var a=this;if(!n)return null;var t;return n.forEach(function(o){if(!t){var i=a.formatLanguageCode(o);(!a.options.supportedLngs||a.isSupportedCode(i))&&(t=i)}}),!t&&this.options.supportedLngs&&n.forEach(function(o){if(!t){var i=a.getLanguagePartFromCode(o);if(a.isSupportedCode(i))return t=i;t=a.options.supportedLngs.find(function(s){if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&s.indexOf(i)===0)return s})}}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}},{key:"getFallbackCodes",value:function(n,a){if(!n)return[];if(typeof n=="function"&&(n=n(a)),typeof n=="string"&&(n=[n]),Object.prototype.toString.apply(n)==="[object Array]")return n;if(!a)return n.default||[];var t=n[a];return t||(t=n[this.getScriptPartFromCode(a)]),t||(t=n[this.formatLanguageCode(a)]),t||(t=n[this.getLanguagePartFromCode(a)]),t||(t=n.default),t||[]}},{key:"toResolveHierarchy",value:function(n,a){var t=this,o=this.getFallbackCodes(a||this.options.fallbackLng||[],n),i=[],s=function(p){p&&(t.isSupportedCode(p)?i.push(p):t.logger.warn("rejecting language code not found in supportedLngs: ".concat(p)))};return typeof n=="string"&&n.indexOf("-")>-1?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(n))):typeof n=="string"&&s(this.formatLanguageCode(n)),o.forEach(function(l){i.indexOf(l)<0&&s(t.formatLanguageCode(l))}),i}}]),r}(),bo=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],wo={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}},Ao=["v1","v2","v3"],Kr={zero:0,one:1,two:2,few:3,many:4,other:5};function So(){var r={};return bo.forEach(function(e){e.lngs.forEach(function(n){r[n]={numbers:e.nr,plurals:wo[e.fc]}})}),r}var To=function(){function r(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};B(this,r),this.languageUtils=e,this.options=n,this.logger=W.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=So()}return K(r,[{key:"addRule",value:function(n,a){this.rules[n]=a}},{key:"getRule",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(n,{type:a.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[n]||this.rules[this.languageUtils.getLanguagePartFromCode(n)]}},{key:"needsPlural",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=this.getRule(n,a);return this.shouldUseIntlApi()?t&&t.resolvedOptions().pluralCategories.length>1:t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(n,a){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(n,t).map(function(o){return"".concat(a).concat(o)})}},{key:"getSuffixes",value:function(n){var a=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.getRule(n,t);return o?this.shouldUseIntlApi()?o.resolvedOptions().pluralCategories.sort(function(i,s){return Kr[i]-Kr[s]}).map(function(i){return"".concat(a.options.prepend).concat(i)}):o.numbers.map(function(i){return a.getSuffix(n,i,t)}):[]}},{key:"getSuffix",value:function(n,a){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=this.getRule(n,t);return o?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(o.select(a)):this.getSuffixRetroCompatible(o,a):(this.logger.warn("no plural rule found for: ".concat(n)),"")}},{key:"getSuffixRetroCompatible",value:function(n,a){var t=this,o=n.noAbs?n.plurals(a):n.plurals(Math.abs(a)),i=n.numbers[o];this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));var s=function(){return t.options.prepend&&i.toString()?t.options.prepend+i.toString():i.toString()};return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?"_plural_".concat(i.toString()):s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1?s():this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString()}},{key:"shouldUseIntlApi",value:function(){return!Ao.includes(this.options.compatibilityJSON)}}]),r}();function Fr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);e&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,a)}return n}function G(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fr(Object(n),!0).forEach(function(a){H(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Fr(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}function Ur(r,e,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",t=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=uo(r,e,n);return!o&&t&&typeof n=="string"&&(o=je(r,n,a),o===void 0&&(o=je(e,n,a))),o}var _o=function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};B(this,r),this.logger=W.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(n){return n},this.init(e)}return K(r,[{key:"init",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});var a=n.interpolation;this.escape=a.escape!==void 0?a.escape:co,this.escapeValue=a.escapeValue!==void 0?a.escapeValue:!0,this.useRawValueToEscape=a.useRawValueToEscape!==void 0?a.useRawValueToEscape:!1,this.prefix=a.prefix?ce(a.prefix):a.prefixEscaped||"{{",this.suffix=a.suffix?ce(a.suffix):a.suffixEscaped||"}}",this.formatSeparator=a.formatSeparator?a.formatSeparator:a.formatSeparator||",",this.unescapePrefix=a.unescapeSuffix?"":a.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":a.unescapeSuffix||"",this.nestingPrefix=a.nestingPrefix?ce(a.nestingPrefix):a.nestingPrefixEscaped||ce("$t("),this.nestingSuffix=a.nestingSuffix?ce(a.nestingSuffix):a.nestingSuffixEscaped||ce(")"),this.nestingOptionsSeparator=a.nestingOptionsSeparator?a.nestingOptionsSeparator:a.nestingOptionsSeparator||",",this.maxReplaces=a.maxReplaces?a.maxReplaces:1e3,this.alwaysFormat=a.alwaysFormat!==void 0?a.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var n="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(n,"g");var a="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(a,"g");var t="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(t,"g")}},{key:"interpolate",value:function(n,a,t,o){var i=this,s,l,p,f=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(w){return w.replace(/\$/g,"$$$$")}var d=function(h){if(h.indexOf(i.formatSeparator)<0){var x=Ur(a,f,h,i.options.keySeparator,i.options.ignoreJSONStructure);return i.alwaysFormat?i.format(x,void 0,t,G(G(G({},o),a),{},{interpolationkey:h})):x}var _=h.split(i.formatSeparator),g=_.shift().trim(),y=_.join(i.formatSeparator).trim();return i.format(Ur(a,f,g,i.options.keySeparator,i.options.ignoreJSONStructure),y,t,G(G(G({},o),a),{},{interpolationkey:g}))};this.resetRegExp();var m=o&&o.missingInterpolationHandler||this.options.missingInterpolationHandler,b=o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,S=[{regex:this.regexpUnescape,safeValue:function(h){return u(h)}},{regex:this.regexp,safeValue:function(h){return i.escapeValue?u(i.escape(h)):u(h)}}];return S.forEach(function(w){for(p=0;s=w.regex.exec(n);){var h=s[1].trim();if(l=d(h),l===void 0)if(typeof m=="function"){var x=m(n,s,o);l=typeof x=="string"?x:""}else if(o&&Object.prototype.hasOwnProperty.call(o,h))l="";else if(b){l=s[0];continue}else i.logger.warn("missed to pass in variable ".concat(h," for interpolating ").concat(n)),l="";else typeof l!="string"&&!i.useRawValueToEscape&&(l=Rr(l));var _=w.safeValue(l);if(n=n.replace(s[0],_),b?(w.regex.lastIndex+=l.length,w.regex.lastIndex-=s[0].length):w.regex.lastIndex=0,p++,p>=i.maxReplaces)break}}),n}},{key:"nest",value:function(n,a){var t=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,l;function p(m,b){var S=this.nestingOptionsSeparator;if(m.indexOf(S)<0)return m;var w=m.split(new RegExp("".concat(S,"[ ]*{"))),h="{".concat(w[1]);m=w[0],h=this.interpolate(h,l);var x=h.match(/'/g),_=h.match(/"/g);(x&&x.length%2===0&&!_||_.length%2!==0)&&(h=h.replace(/'/g,'"'));try{l=JSON.parse(h),b&&(l=G(G({},b),l))}catch(g){return this.logger.warn("failed parsing options string in nesting for key ".concat(m),g),"".concat(m).concat(S).concat(h)}return delete l.defaultValue,m}for(;i=this.nestingRegexp.exec(n);){var f=[];l=G({},o),l=l.replace&&typeof l.replace!="string"?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;var u=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){var d=i[1].split(this.formatSeparator).map(function(m){return m.trim()});i[1]=d.shift(),f=d,u=!0}if(s=a(p.call(this,i[1].trim(),l),l),s&&i[0]===n&&typeof s!="string")return s;typeof s!="string"&&(s=Rr(s)),s||(this.logger.warn("missed to resolve ".concat(i[1]," for nesting ").concat(n)),s=""),u&&(s=f.reduce(function(m,b){return t.format(m,b,o.lng,G(G({},o),{},{interpolationkey:i[1].trim()}))},s.trim())),n=n.replace(i[0],s),this.regexp.lastIndex=0}return n}}]),r}();function Gr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);e&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,a)}return n}function J(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gr(Object(n),!0).forEach(function(a){H(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Gr(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}function Eo(r){var e=r.toLowerCase().trim(),n={};if(r.indexOf("(")>-1){var a=r.split("(");e=a[0].toLowerCase().trim();var t=a[1].substring(0,a[1].length-1);if(e==="currency"&&t.indexOf(":")<0)n.currency||(n.currency=t.trim());else if(e==="relativetime"&&t.indexOf(":")<0)n.range||(n.range=t.trim());else{var o=t.split(";");o.forEach(function(i){if(i){var s=i.split(":"),l=vt(s),p=l[0],f=l.slice(1),u=f.join(":").trim().replace(/^'+|'+$/g,"");n[p.trim()]||(n[p.trim()]=u),u==="false"&&(n[p.trim()]=!1),u==="true"&&(n[p.trim()]=!0),isNaN(u)||(n[p.trim()]=parseInt(u,10))}})}}return{formatName:e,formatOptions:n}}function pe(r){var e={};return function(a,t,o){var i=t+JSON.stringify(o),s=e[i];return s||(s=r(t,o),e[i]=s),s(a)}}var Co=function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};B(this,r),this.logger=W.create("formatter"),this.options=e,this.formats={number:pe(function(n,a){var t=new Intl.NumberFormat(n,J({},a));return function(o){return t.format(o)}}),currency:pe(function(n,a){var t=new Intl.NumberFormat(n,J(J({},a),{},{style:"currency"}));return function(o){return t.format(o)}}),datetime:pe(function(n,a){var t=new Intl.DateTimeFormat(n,J({},a));return function(o){return t.format(o)}}),relativetime:pe(function(n,a){var t=new Intl.RelativeTimeFormat(n,J({},a));return function(o){return t.format(o,a.range||"day")}}),list:pe(function(n,a){var t=new Intl.ListFormat(n,J({},a));return function(o){return t.format(o)}})},this.init(e)}return K(r,[{key:"init",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},t=a.interpolation;this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||","}},{key:"add",value:function(n,a){this.formats[n.toLowerCase().trim()]=a}},{key:"addCached",value:function(n,a){this.formats[n.toLowerCase().trim()]=pe(a)}},{key:"format",value:function(n,a,t){var o=this,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=a.split(this.formatSeparator),l=s.reduce(function(p,f){var u=Eo(f),d=u.formatName,m=u.formatOptions;if(o.formats[d]){var b=p;try{var S=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},w=S.locale||S.lng||i.locale||i.lng||t;b=o.formats[d](p,w,J(J(J({},m),i),S))}catch(h){o.logger.warn(h)}return b}else o.logger.warn("there was no format function for ".concat(d));return p},n);return l}}]),r}();function Hr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);e&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,a)}return n}function $r(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hr(Object(n),!0).forEach(function(a){H(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}function Oo(r){var e=Po();return function(){var a=F(r),t;if(e){var o=F(this).constructor;t=Reflect.construct(a,arguments,o)}else t=a.apply(this,arguments);return te(this,t)}}function Po(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ko(r,e){r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)}var No=function(r){fe(n,r);var e=Oo(n);function n(a,t,o){var i,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return B(this,n),i=e.call(this),Be&&ee.call(U(i)),i.backend=a,i.store=t,i.services=o,i.languageUtils=o.languageUtils,i.options=s,i.logger=W.create("backendConnector"),i.waitingReads=[],i.maxParallelReads=s.maxParallelReads||10,i.readingCalls=0,i.maxRetries=s.maxRetries>=0?s.maxRetries:5,i.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(o,s.backend,s),i}return K(n,[{key:"queueLoad",value:function(t,o,i,s){var l=this,p={},f={},u={},d={};return t.forEach(function(m){var b=!0;o.forEach(function(S){var w="".concat(m,"|").concat(S);!i.reload&&l.store.hasResourceBundle(m,S)?l.state[w]=2:l.state[w]<0||(l.state[w]===1?f[w]===void 0&&(f[w]=!0):(l.state[w]=1,b=!1,f[w]===void 0&&(f[w]=!0),p[w]===void 0&&(p[w]=!0),d[S]===void 0&&(d[S]=!0)))}),b||(u[m]=!0)}),(Object.keys(p).length||Object.keys(f).length)&&this.queue.push({pending:f,pendingCount:Object.keys(f).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(p),pending:Object.keys(f),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(d)}}},{key:"loaded",value:function(t,o,i){var s=t.split("|"),l=s[0],p=s[1];o&&this.emit("failedLoading",l,p,o),i&&this.store.addResourceBundle(l,p,i),this.state[t]=o?-1:2;var f={};this.queue.forEach(function(u){lo(u.loaded,[l],p),ko(u,t),o&&u.errors.push(o),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(function(d){f[d]||(f[d]={});var m=u.loaded[d];m.length&&m.forEach(function(b){f[d][b]===void 0&&(f[d][b]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",f),this.queue=this.queue.filter(function(u){return!u.done})}},{key:"read",value:function(t,o,i){var s=this,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,f=arguments.length>5?arguments[5]:void 0;if(!t.length)return f(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:o,fcName:i,tried:l,wait:p,callback:f});return}this.readingCalls++;var u=function(S,w){if(s.readingCalls--,s.waitingReads.length>0){var h=s.waitingReads.shift();s.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(S&&w&&l<s.maxRetries){setTimeout(function(){s.read.call(s,t,o,i,l+1,p*2,f)},p);return}f(S,w)},d=this.backend[i].bind(this.backend);if(d.length===2){try{var m=d(t,o);m&&typeof m.then=="function"?m.then(function(b){return u(null,b)}).catch(u):u(null,m)}catch(b){u(b)}return}return d(t,o,u)}},{key:"prepareLoading",value:function(t,o){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();typeof t=="string"&&(t=this.languageUtils.toResolveHierarchy(t)),typeof o=="string"&&(o=[o]);var p=this.queueLoad(t,o,s,l);if(!p.toLoad.length)return p.pending.length||l(),null;p.toLoad.forEach(function(f){i.loadOne(f)})}},{key:"load",value:function(t,o,i){this.prepareLoading(t,o,{},i)}},{key:"reload",value:function(t,o,i){this.prepareLoading(t,o,{reload:!0},i)}},{key:"loadOne",value:function(t){var o=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=t.split("|"),l=s[0],p=s[1];this.read(l,p,"read",void 0,void 0,function(f,u){f&&o.logger.warn("".concat(i,"loading namespace ").concat(p," for language ").concat(l," failed"),f),!f&&u&&o.logger.log("".concat(i,"loaded namespace ").concat(p," for language ").concat(l),u),o.loaded(t,f,u)})}},{key:"saveMissing",value:function(t,o,i,s,l){var p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(o)){this.logger.warn('did not save key "'.concat(i,'" as the namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend&&this.backend.create){var u=$r($r({},p),{},{isUpdate:l}),d=this.backend.create.bind(this.backend);if(d.length<6)try{var m;d.length===5?m=d(t,o,i,s,u):m=d(t,o,i,s),m&&typeof m.then=="function"?m.then(function(b){return f(null,b)}).catch(f):f(null,m)}catch(b){f(b)}else d(t,o,i,s,f,u)}!t||!t[0]||this.store.addResource(t[0],o,i,s)}}}]),n}(ee);function Wr(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var n={};if(N(e[1])==="object"&&(n=e[1]),typeof e[1]=="string"&&(n.defaultValue=e[1]),typeof e[2]=="string"&&(n.tDescription=e[2]),N(e[2])==="object"||N(e[3])==="object"){var a=e[3]||e[2];Object.keys(a).forEach(function(t){n[t]=a[t]})}return n},interpolation:{escapeValue:!0,format:function(e,n,a,t){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function zr(r){return typeof r.ns=="string"&&(r.ns=[r.ns]),typeof r.fallbackLng=="string"&&(r.fallbackLng=[r.fallbackLng]),typeof r.fallbackNS=="string"&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs&&r.supportedLngs.indexOf("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),r}function Vr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);e&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,a)}return n}function $(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vr(Object(n),!0).forEach(function(a){H(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}function Ro(r){var e=Io();return function(){var a=F(r),t;if(e){var o=F(this).constructor;t=Reflect.construct(a,arguments,o)}else t=a.apply(this,arguments);return te(this,t)}}function Io(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Me(){}function Mo(r){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(r));e.forEach(function(n){typeof r[n]=="function"&&(r[n]=r[n].bind(r))})}var De=function(r){fe(n,r);var e=Ro(n);function n(){var a,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if(B(this,n),a=e.call(this),Be&&ee.call(U(a)),a.options=zr(t),a.services={},a.logger=W,a.modules={external:[]},Mo(U(a)),o&&!a.isInitialized&&!t.isClone){if(!a.options.initImmediate)return a.init(t,o),te(a,U(a));setTimeout(function(){a.init(t,o)},0)}return a}return K(n,[{key:"init",value:function(){var t=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;typeof o=="function"&&(i=o,o={}),!o.defaultNS&&o.defaultNS!==!1&&o.ns&&(typeof o.ns=="string"?o.defaultNS=o.ns:o.ns.indexOf("translation")<0&&(o.defaultNS=o.ns[0]));var s=Wr();this.options=$($($({},s),this.options),zr(o)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=$($({},s.interpolation),this.options.interpolation)),o.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=o.keySeparator),o.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=o.nsSeparator);function l(h){return h?typeof h=="function"?new h:h:null}if(!this.options.isClone){this.modules.logger?W.init(l(this.modules.logger),this.options):W.init(null,this.options);var p;this.modules.formatter?p=this.modules.formatter:typeof Intl<"u"&&(p=Co);var f=new Br(this.options);this.store=new xo(this.options.resources,this.options);var u=this.services;u.logger=W,u.resourceStore=this.store,u.languageUtils=f,u.pluralResolver=new To(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),p&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(u.formatter=l(p),u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new _o(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new No(l(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",function(h){for(var x=arguments.length,_=new Array(x>1?x-1:0),g=1;g<x;g++)_[g-1]=arguments[g];t.emit.apply(t,[h].concat(_))}),this.modules.languageDetector&&(u.languageDetector=l(this.modules.languageDetector),u.languageDetector.init&&u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=l(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new Dr(this.services,this.options),this.translator.on("*",function(h){for(var x=arguments.length,_=new Array(x>1?x-1:0),g=1;g<x;g++)_[g-1]=arguments[g];t.emit.apply(t,[h].concat(_))}),this.modules.external.forEach(function(h){h.init&&h.init(t)})}if(this.format=this.options.interpolation.format,i||(i=Me),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var m=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];m.forEach(function(h){t[h]=function(){var x;return(x=t.store)[h].apply(x,arguments)}});var b=["addResource","addResources","addResourceBundle","removeResourceBundle"];b.forEach(function(h){t[h]=function(){var x;return(x=t.store)[h].apply(x,arguments),t}});var S=we(),w=function(){var x=function(g,y){t.isInitialized&&!t.initializedStoreOnce&&t.logger.warn("init: i18next is already initialized. You should call init just once!"),t.isInitialized=!0,t.options.isClone||t.logger.log("initialized",t.options),t.emit("initialized",t.options),S.resolve(y),i(g,y)};if(t.languages&&t.options.compatibilityAPI!=="v1"&&!t.isInitialized)return x(null,t.t.bind(t));t.changeLanguage(t.options.lng,x)};return this.options.resources||!this.options.initImmediate?w():setTimeout(w,0),S}},{key:"loadResources",value:function(t){var o=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Me,s=i,l=typeof t=="string"?t:this.language;if(typeof t=="function"&&(s=t),!this.options.resources||this.options.partialBundledLanguages){if(l&&l.toLowerCase()==="cimode")return s();var p=[],f=function(m){if(m){var b=o.services.languageUtils.toResolveHierarchy(m);b.forEach(function(S){p.indexOf(S)<0&&p.push(S)})}};if(l)f(l);else{var u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.forEach(function(d){return f(d)})}this.options.preload&&this.options.preload.forEach(function(d){return f(d)}),this.services.backendConnector.load(p,this.options.ns,function(d){!d&&!o.resolvedLanguage&&o.language&&o.setResolvedLanguage(o.language),s(d)})}else s(null)}},{key:"reloadResources",value:function(t,o,i){var s=we();return t||(t=this.languages),o||(o=this.options.ns),i||(i=Me),this.services.backendConnector.reload(t,o,function(l){s.resolve(),i(l)}),s}},{key:"use",value:function(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Jr.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}},{key:"setResolvedLanguage",value:function(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(var o=0;o<this.languages.length;o++){var i=this.languages[o];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}},{key:"changeLanguage",value:function(t,o){var i=this;this.isLanguageChangingTo=t;var s=we();this.emit("languageChanging",t);var l=function(d){i.language=d,i.languages=i.services.languageUtils.toResolveHierarchy(d),i.resolvedLanguage=void 0,i.setResolvedLanguage(d)},p=function(d,m){m?(l(m),i.translator.changeLanguage(m),i.isLanguageChangingTo=void 0,i.emit("languageChanged",m),i.logger.log("languageChanged",m)):i.isLanguageChangingTo=void 0,s.resolve(function(){return i.t.apply(i,arguments)}),o&&o(d,function(){return i.t.apply(i,arguments)})},f=function(d){!t&&!d&&i.services.languageDetector&&(d=[]);var m=typeof d=="string"?d:i.services.languageUtils.getBestMatchFromCodes(d);m&&(i.language||l(m),i.translator.language||i.translator.changeLanguage(m),i.services.languageDetector&&i.services.languageDetector.cacheUserLanguage&&i.services.languageDetector.cacheUserLanguage(m)),i.loadResources(m,function(b){p(b,m)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?f(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(f):this.services.languageDetector.detect(f):f(t),s}},{key:"getFixedT",value:function(t,o,i){var s=this,l=function p(f,u){var d;if(N(u)!=="object"){for(var m=arguments.length,b=new Array(m>2?m-2:0),S=2;S<m;S++)b[S-2]=arguments[S];d=s.options.overloadTranslationOptionHandler([f,u].concat(b))}else d=$({},u);d.lng=d.lng||p.lng,d.lngs=d.lngs||p.lngs,d.ns=d.ns||p.ns,d.keyPrefix=d.keyPrefix||i||p.keyPrefix;var w=s.options.keySeparator||".",h;return d.keyPrefix&&Array.isArray(f)?h=f.map(function(x){return"".concat(d.keyPrefix).concat(w).concat(x)}):h=d.keyPrefix?"".concat(d.keyPrefix).concat(w).concat(f):f,s.t(h,d)};return typeof t=="string"?l.lng=t:l.lngs=t,l.ns=o,l.keyPrefix=i,l}},{key:"t",value:function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)}},{key:"exists",value:function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)}},{key:"setDefaultNamespace",value:function(t){this.options.defaultNS=t}},{key:"hasLoadedNamespace",value:function(t){var o=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var s=i.lng||this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,p=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;var f=function(m,b){var S=o.services.backendConnector.state["".concat(m,"|").concat(b)];return S===-1||S===2};if(i.precheck){var u=i.precheck(this,f);if(u!==void 0)return u}return!!(this.hasResourceBundle(s,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||f(s,t)&&(!l||f(p,t)))}},{key:"loadNamespaces",value:function(t,o){var i=this,s=we();return this.options.ns?(typeof t=="string"&&(t=[t]),t.forEach(function(l){i.options.ns.indexOf(l)<0&&i.options.ns.push(l)}),this.loadResources(function(l){s.resolve(),o&&o(l)}),s):(o&&o(),Promise.resolve())}},{key:"loadLanguages",value:function(t,o){var i=we();typeof t=="string"&&(t=[t]);var s=this.options.preload||[],l=t.filter(function(p){return s.indexOf(p)<0});return l.length?(this.options.preload=s.concat(l),this.loadResources(function(p){i.resolve(),o&&o(p)}),i):(o&&o(),Promise.resolve())}},{key:"dir",value:function(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";var o=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services&&this.services.languageUtils||new Br(Wr());return o.indexOf(i.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var t=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Me,s=$($($({},this.options),o),{isClone:!0}),l=new n(s);(o.debug!==void 0||o.prefix!==void 0)&&(l.logger=l.logger.clone(o));var p=["store","services","language"];return p.forEach(function(f){l[f]=t[f]}),l.services=$({},this.services),l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l.translator=new Dr(l.services,l.options),l.translator.on("*",function(f){for(var u=arguments.length,d=new Array(u>1?u-1:0),m=1;m<u;m++)d[m-1]=arguments[m];l.emit.apply(l,[f].concat(d))}),l.init(s,i),l.translator.options=l.options,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),n}(ee);H(De,"createInstance",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new De(r,e)});var L=De.createInstance();L.createInstance=De.createInstance;var Ql=L.createInstance,Xl=L.dir,Yl=L.init,Zl=L.loadResources,eu=L.reloadResources,tu=L.use,ru=L.changeLanguage,nu=L.getFixedT,Qr=L.t,au=L.exists,ou=L.setDefaultNamespace,iu=L.hasLoadedNamespace,su=L.loadNamespaces,lu=L.loadLanguages;var Lo=ae(Xr());var jo=ae(oe());function Do(r=1e3){return new Promise(e=>setTimeout(e,r))}function At(r,e=0){let n=!1,a;return function(...t){return n||(n=!0,a=new Promise((o,i)=>{r(...t).then(o).catch(i).finally(async()=>{e&&await Do(e),n=!1})})),a}}var Fe=st(r=>{let e=0;for(let n=0;n<r.length;n++)e=Math.imul(31,e)+r.charCodeAt(n)|0;return""+e});function St(r){let e=n=>{let a=n.timeRemaining();(a>0?r(a):!1)||requestIdleCallback(e)};requestIdleCallback(e)}function Ue(r,e){return Promise.race([r,new Promise((n,a)=>{setTimeout(()=>{a(new Error("timeout"))},e)})])}var de=class{constructor(){this.eventMap=new Map}on(e,n){let a=this.eventMap.get(e);return a||(a=new Set,this.eventMap.set(e,a)),a.add(n),this}off(e,n){let a=this.eventMap.get(e);return a&&(a.delete(n),a.size===0&&this.eventMap.delete(e)),this}emit(e,...n){let a=this.eventMap.get(e);if(a)for(let t of a)t(...n);return this}};var re=ae(oe());var Ge=class r{constructor(e,n,a,t){this.db=null;this.dbName="";this.storeName="";this.dbMapKey="";this.idbMapKey="";if(this.dbMapKey=`${e}_${t||1}`,this.idbMapKey=`${e}_${n}`,r.IDB_MAP[this.idbMapKey])return r.IDB_MAP[this.idbMapKey];r.IDB_MAP[this.idbMapKey]=this,this.dbName=e,this.storeName=n,this.onUpgrade=a.onUpgrade,this.onError=a.onError,this.version=t}static{this.DB_MAP={}}static{this.IDB_MAP={}}async openDB(){let{dbName:e,version:n,onUpgrade:a,onError:t}=this;return r.DB_MAP[this.dbMapKey]?r.DB_MAP[this.dbMapKey]:new Promise((o,i)=>{let s=indexedDB.open(e,n);s.onerror=l=>{i(l)},s.onblocked=l=>{i(l)},s.onupgradeneeded=l=>{a(s.result,l)},s.onsuccess=()=>{let l=s.result;this.db=r.DB_MAP[this.dbMapKey]=l,l.onerror=p=>{t?.(p)},l.onversionchange=()=>{l.close(),this.db=null,delete r.DB_MAP[this.dbMapKey]},o(l)}})}async removeDB(){let e=indexedDB.deleteDatabase(this.dbName);return new Promise((n,a)=>{e.onerror=t=>{a(t)},e.onblocked=t=>{a(t)},e.onsuccess=()=>{n(!0)}})}async transactionAction(e,n){this.db||(this.db=await this.openDB());let a=this.db.transaction(this.storeName,n).objectStore(this.storeName);return new Promise((t,o)=>{let i=e(a);i.onerror=o,i.onsuccess=()=>t(i.result)})}getData(e){return this.transactionAction(n=>n.get(e))}addData(e,n){return this.transactionAction(a=>a.add(e,n),"readwrite")}setData(e,n){return this.transactionAction(a=>a.put(e,n),"readwrite")}deleteData(e){return this.transactionAction(n=>n.delete(e),"readwrite")}clearData(){return this.transactionAction(e=>e.clear(),"readwrite")}};function Bo(r){return new Ge("CACHE",r,{onUpgrade(e){try{e.createObjectStore("TRANSLATION_CACHE",{keyPath:"key"})}catch{}}},1)}function He(){return Bo("TRANSLATION_CACHE")}var Ae=class{constructor(){this.cahce=new Et;this.translators=[new _t,new Tt];this.CHOOSE_DURATION=5*60*1e3;this.lastChooseTime=0;this.translator=this.translators[0],this.chooseTranslator=At(this.chooseTranslator.bind(this))}async translate(e,n,a="",t=!0){let o={},i=t?[]:e,s={};if(t){let f=await this.cahce.get(e.map(u=>({originalText:u,fromCode:a,toCode:n,translatorName:this.translator.name})));for(let u=0;u<e.length;u++){let d=e[u],m=f[u];m?o[u]=m:(s[u]=i.length,i.push(d))}}let l=i.length?await this.translator.translate(i,n,a).catch(async f=>{throw this.lastChooseTime=0,await this.chooseTranslator(),f}):[];t&&l.length&&this.cahce.set(i.map((f,u)=>({originalText:f,fromCode:a,toCode:n,translatedText:l[u],translatorName:this.translator.name})));let p=t?e.map((f,u)=>{let d=o[u];return d||l[s[u]]}):l;return this.chooseTranslator(),p}async chooseTranslator(){if(!(Date.now()-this.lastChooseTime<this.CHOOSE_DURATION)){this.lastChooseTime=Date.now();try{this.translator=await Promise.any(this.translators.map(e=>Ue(e.translate(["hello world"],"es").then(()=>e),3e3)))}catch{this.translator=this.translators[0]}}}},$e=class{constructor(){this.name="";this.controller=new AbortController}abort(){this.controller.abort()}},Tt=class extends $e{constructor(){super(...arguments);this.name="google";this.URL="https://translate.googleapis.com/translate_a/single";this.SEPARATOR=`



`}async translate(n,a,t=""){if(a=We(a),t=We(t),a===t||!n.length)return[...n];let o=n.map(l=>l.replace(/\n{2,}/g,`
`)).join(this.SEPARATOR),i=await fetch(`${this.URL}?client=gtx&dt=t&dj=1&sl=${t||"auto"}&tl=${a}&q=${encodeURIComponent(o)}`,{signal:this.controller.signal});if(!i.ok)throw new Error("google translate fail");let s=await i.json();return this.parseResult(s)}parseResult(n){let{paragraphGroup:a,sentences:t}=n;return(t||a).reduce((o,i)=>o+i.trans,"").split(this.SEPARATOR)}},_t=class extends $e{constructor(){super();this.name="bing";this.URL="https://api-edge.cognitive.microsofttranslator.com/translate";this.AUTH_URL="https://edge.microsoft.com/translate/auth";this.token="";this.getToken=At(this.getToken.bind(this))}async translate(n,a,t=""){if(a=We(a),t=We(t),a===t||!n.length)return[...n];this.token||(this.token=await this.getToken());let o=n.map(p=>({Text:p})),i=()=>fetch(`${this.URL}?from=${t}&to=${a}&api-version=3.0`,{signal:this.controller.signal,method:"POST",body:JSON.stringify(o),headers:{authorization:`Bearer ${this.token}`,"content-type":"application/json"}}),s=await i();if(s.status===401&&(this.token=await this.getToken(!1),s=await i()),!s.ok)throw new Error("bing translate fail");return(await s.json()).map(p=>p.translations[0].text)}async getToken(n=!0){let a="__bing_translation_token__",t="";if(n){let o=await pt(a);o&&(t=o)}if(!t){let o=await fetch(this.AUTH_URL,{method:"GET",headers:{}});if(!o.ok)throw new Error("bing token fail");t=await o.text(),await Cr({[a]:t})}return t}};function We(r){switch(r){case"zh_CN":return"zh-Hans";case"zh_TW":return"zh-Hant";case"auto":return"";default:return r}}var Et=class{async get(e){let n=e.map(({originalText:t,toCode:o,fromCode:i,translatorName:s})=>this.getKey(t,o,i,s)),a=[];try{if(re.default.tabs){let t=He();a=await Promise.all(n.map(o=>t.getData(o)))}else a=await re.default.runtime.sendMessage({type:"TRANSLATION_CACHE",action:"get",keys:n})}catch{}return a.map(t=>t?.text)}async set(e){let n=e.map(({originalText:a,toCode:t,fromCode:o,translatedText:i,translatorName:s})=>({key:this.getKey(a,t,o,s),text:i,updateAt:Date.now()}));try{if(re.default.tabs){let a=He();await Promise.all(n.map(t=>a.setData(t)))}else await re.default.runtime.sendMessage({type:"TRANSLATION_CACHE",action:"set",values:n})}catch{}}async clear(){try{re.default.tabs?await He().clearData():await re.default.runtime.sendMessage({type:"TRANSLATION_CACHE",action:"clear"})}catch{}}getKey(e,n,a,t){return Fe(`${t||""}_${a}_${n}_${e}`)}};var Yr=["SCRIPT","NOSCRIPT","STYLE","TEXTAREA","PRE","svg","TITLE","HEAD","SVG","RUBY","METER","PROCESS","SLOT","math","MATH"],Zr=[".notranslate","[translate=no]"],en=["CODE","PRE","ABBR","ACRONYM","KBD","SAMP","VAR","TIME"];var I="sider-trans",tn=I.toLowerCase(),Se="sider-trans-inline",Ct="sider-trans-block",rn=`
<svg
  class="${I}-icon ${I}-loading"
  style="display: inline;"
  width="12"
  height="12"
  xmlns="http://www.w3.org/2000/svg"
  fill="none"
  viewBox="0 0 24 24"
>
  <circle opacity="0.25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
  <path
    opacity="0.75"
    fill="currentColor"
    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
  ></path>
</svg>`,nn=`<svg class="${I}-icon ${I}-refresh" style="display: inline;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="12" height="12"><path d="M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z" fill="currentColor"></path></svg>`,ze=`${I}-style`,an=`
@keyframes ${I}-spin {
  to {transform: rotate(360deg);}
}
${Se} {
  margin-inline-start: 4px !important;
}
${Ct} {
  margin: 8px 0 !important;
  display: inline-block;
}
.${I}-icon {
  display: inline !important;
  border: none !important;
  background: transparent !important;
  color: #8a57ea !important;
  vertical-align: middle !important;
  fill: none !important;
  stroke: none !important;
}
.${I}-loading {
  animation: ${I}-spin 1s linear infinite !important;
}
.${I}-refresh {
  cursor: pointer;
}
`;function on(r){let e=r;if(!e||Fo(e))return!1;for(;e&&e.nodeName!=="BODY";){if(Uo(e)||Ko(e))return!1;e=e.parentElement}return!0}function Ko(r){let{display:e,opacity:n}=getComputedStyle(r);return e==="none"||n==="0"}function Fo(r){let{visibility:e}=getComputedStyle(r);return e==="hidden"}function Uo(r){let e=r.nodeName;return!!(Yr.includes(e)||Zr.some(n=>r.matches(n)))}function sn(r){let e=r.map(n=>n.nodeValue||"").join("").trim();if(Go(e))return!0;if(r.length<=1){let n=r[0]?.parentNode;for(;n&&n.nodeName!=="BODY";){if(n.nodeName==="CODE")return!0;n=n.parentNode}}return!1}function Go(r){return r=r.trim(),!!(r.length<2||/^(.){0,3}(\d*[,:._-])*\d+(.){0,5}$/g.test(r)||/^(([A-Z0-9]+[_-])*[A-Z0-9]){1,8}$/g.test(r)||/^\w+@\w+[.]\w+$/g.test(r)||/^(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)$/.test(r)||/^@[\S]+$/g.test(r)||/^[-`~!@#$%^&*()_+=[\]{};:'",<.>/?]+$/g.test(r))}function Ot(r){let{display:e}=getComputedStyle(r);return e==="none"||e.includes("inline")}function Pt(r){return!Ot(r)}function ln(r){let e=r.parentElement;for(;e&&e.nodeName!=="BODY"&&!Pt(e);)e=e.parentElement;return e}function un(r){let e=r.parentElement,n=null;for(;e&&e.nodeName!=="BODY"&&Ot(e);)n=e,e=e.parentElement;return n}function kt(r){let e=r.parentElement,n=null;for(;e&&e.nodeName!=="BODY"&&Ot(e)&&e.childNodes.length===1;)n=e,e=e.parentElement;return n}function fn(r){for(;r.children.length>0;)r=r.children?.[0];return r}function Nt(r,e){e.parentElement?.insertBefore(r,e.nextSibling)}var $o=window.top!==window,Te=class extends de{constructor(){super();this.toCode="";this.fromCode="";this.translator=new Ae;this.state="initial";this.items=new Set;this.maxTranslateItems=30;this.waitingTranslateItems=[];this.retryTranslateItems=[];this.textNodeSet=new WeakSet;this.walking=!1;this.walkAgain=!0;this.cleaning=!1;this.ob=null;this.startTranslateDebounced=ye(this.startTranslate.bind(this),50),this.getTranslateItemsDebounced=ye(this.getTranslateItems.bind(this),100)}observeMutation(){this.ob||(this.ob=new MutationObserver(n=>{for(let a of n)a.addedNodes.forEach(t=>{let o=t.nodeName;t.nodeType===Node.ELEMENT_NODE&&o!==tn&&o!=="svg"&&t.textContent&&!t.closest(I)&&this.getTranslateItemsDebounced()})}),this.ob.observe(document.body,{subtree:!0,childList:!0}))}async translate(n,a=""){if(!document.body)return;this.sendMessage("translate",{toCode:n,fromCode:a});let t=!!this.toCode&&(this.toCode!==n||this.fromCode!==a);if(!(this.state==="translated"&&!t)){if(this.toCode=n,this.fromCode=a,t){this.unmountTranslateItems(),this.items.forEach(o=>o.refresh());return}if(this.state==="reset"){this.items.forEach(o=>o.remount()),this.state="translated",this.emit("stateChange",this.state),this.observeMutation();return}this.injectCSS(),this.getTranslateItems(),this.observeMutation()}}reset(){this.sendMessage("reset"),this.state==="translated"&&(this.ob?.disconnect(),this.ob=null,this.unmountTranslateItems(),this.state="reset",this.emit("stateChange",this.state))}clear(){this.sendMessage("clear"),this.state!=="initial"&&(this.ob?.disconnect(),this.ob=null,this.walking=!1,this.walkAgain=!0,this.cleaning=!1,this.removeCSS(),this.unmountTranslateItems(),this.items.clear(),this.textNodeSet=new WeakSet,this.waitingTranslateItems=[],this.retryTranslateItems=[],this.state="initial",this.emit("stateChange",this.state))}toggle(n,a=""){this.state==="translated"?this.reset():this.translate(n,a)}sendMessage(n,a){$o||Ne({type:"PAGETRANSLAE_ACTION",data:{action:n,...a||{}}})}getTranslateItems(){this.walkTree(),this.cleanNodes()}walkTree(){if(this.walking){this.walkAgain=!0;return}this.walking=!0;let n=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,o=>{if(this.textNodeSet.has(o))return NodeFilter.FILTER_REJECT;let i=o.parentElement;return!(o.nodeValue||"").trim()||!i||i.closest(I)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),a=null,t=[];St(o=>{for(let i=0;o>0;o-=performance.now()-i){i=performance.now();let s=n.nextNode();if(!s)return a&&t.length&&this.newPageTranslateItem(t,a),this.walking=!1,this.walkAgain&&(this.walkAgain=!1,setTimeout(()=>{this.getTranslateItemsDebounced()},1e3)),!0;let l=ln(s);if(!l||!on(s.parentElement))continue;a||(a=l);let p=kt(s),f=p?p.previousElementSibling:s.previousSibling,u=!1;f&&(u=f.nodeName==="BR"||f.nodeName==="LI"||("tagName"in f?Pt(f):!1)),a!==l||u?(this.newPageTranslateItem(t,a),a=l,t=[s]):t.push(s),this.walkAgain=!0}return!1})}cleanNodes(){if(this.cleaning)return;this.cleaning=!0;let n=this.items,a=function*(){for(let t of n)yield t}();St(t=>{for(let o=0;t>0;t-=performance.now()-o){o=performance.now();let{done:i,value:s}=a.next();if(i||!s)return this.cleaning=!1,!0;s.removed&&(this.items.delete(s),s.textNodes.forEach(l=>this.textNodeSet.delete(l)))}return!1})}newPageTranslateItem(n,a){if(n.forEach(o=>this.textNodeSet.add(o)),sn(n))return;let t=new It(n,a);this.items.add(t),t.on("visible",()=>{this.waitingTranslateItems.push(t),this.startTranslateDebounced()}).on("refresh",()=>{this.startTranslate(!0)})}async startTranslate(n=!1){let a=n?this.retryTranslateItems:this.waitingTranslateItems;if(!a.length)return;n?this.retryTranslateItems=[]:this.waitingTranslateItems=[];let t=n?Math.floor(this.maxTranslateItems*.8):this.maxTranslateItems,o=[];for(let i=0;i<a.length;i+=t)o.push(this.doTranslate(a.slice(i,i+t)));this.emit("loading",!0),await Promise.all(o),this.emit("loading",!1)}async doTranslate(n){if(!n.length)return;let a=!1,t=await Ue(this.translator.translate(n.map(o=>(o.setLoading(!0),o.toBeTranslatedText)),this.toCode,this.fromCode),8e3).catch(()=>{a=!0,this.retryTranslateItems=[...this.retryTranslateItems,...n],n.forEach(o=>o.setTranslatedText(""))});if(!a){if(t)for(let o=0;o<n.length;o++){let i=n[o],s=t[o]||"";i.setTranslatedText(s)}this.state!=="translated"&&(this.state="translated",this.emit("stateChange",this.state))}}unmountTranslateItems(){this.items.forEach(n=>{n.unmount()})}injectCSS(){if(!document.querySelector(`#${ze}`)){let a=document.createElement("style");a.id=ze,a.innerHTML=an,(document.head||document.body||document.documentElement)?.appendChild(a)}}removeCSS(){let n=document.querySelector(`#${ze}`);n&&n.remove()}},Rt=null,Ve=null,It=class extends de{constructor(n,a){super();this._toBeTranslatedText="";this._rawText="";this.visible=!1;this.loading=!1;this.loadingNode=null;this.refreshNode=null;this.onlyChildContainerMap=new Map;this.ob=null;this.SEPARATOR_REG=/(.*?)< *sd *(\d+) *>([^]*?)<\/ *sd *(\d+) *>/g;this.TAG_REG=/(< *sd *\d+ *>)|(<\/ *sd *\d+ *>)/g;this.urlId="";this.urlId=Fe(location.href),this.textNodes=n,this.blockContainer=a,this.translatedContainer=this.createTranslatedContainer(),this.observeIntersection()}get rawText(){return this._rawText?this._rawText:this._rawText=this.textNodes.map(n=>n.nodeValue||"").join("").trim()}get toBeTranslatedText(){if(this._toBeTranslatedText)return this._toBeTranslatedText;if(this.textNodes.length<=1)return this._toBeTranslatedText=(this.textNodes[0]?.nodeValue||"").trim();let n=1;return this._toBeTranslatedText=this.textNodes.map(a=>{let t=a.parentElement,o=a.nodeValue||"",i=null;if(t&&t!==this.blockContainer&&(i=kt(a))){let s=`sd${n++}`;return this.onlyChildContainerMap.set(s,i),`<${s}>${o}</${s}>`}return o}).join("").trim()}get removed(){return!this.textNodes[0].isConnected}observeIntersection(){this.ob||(this.ob=new IntersectionObserver(ye(n=>{!this.visible&&n[0].isIntersecting&&(this.visible=!0,this.mount(),this.emit("visible"),this.ob?.disconnect(),this.ob=null)},100),{rootMargin:`${innerHeight}px 0px ${innerHeight}px 0px`}),this.blockContainer&&this.ob.observe(this.blockContainer))}setLoading(n){if(this.loading!==n)if(this.loading=n,this.loading){if(!this.loadingNode){if(!Rt){let a=document.createElement(Se);a.innerHTML=rn,Rt=a}this.loadingNode=Rt.cloneNode(!0)}this.emptyContainer(),this.translatedContainer.appendChild(this.loadingNode)}else this.loadingNode?.remove()}setRefreshIcon(){if(!this.refreshNode){if(!Ve){let n=document.createElement(Se);n.innerHTML=nn,Ve=n,Ve.setAttribute("title",Qr("pageTranslation.transAgain"))}this.refreshNode=Ve.cloneNode(!0),this.refreshNode.onclick=()=>{this.emit("refresh")}}this.emptyContainer(),this.translatedContainer.appendChild(this.refreshNode)}setTranslatedText(n){if(this.setLoading(!1),!n){this.setRefreshIcon();return}let a=!1,{rawText:t}=this;t.match(/\p{Unified_Ideograph}/gu)?t.length<=.25*25&&(a=!0):t.length<=25&&t.split(" ").filter(s=>s.trim()).length<=4&&(a=!0);let o=this.parseTranslatedText(n),i=document.createDocumentFragment();if(o.forEach(({index:s,text:l})=>{if(!s)i.appendChild(document.createTextNode(l));else{let p=this.onlyChildContainerMap.get(`sd${s}`);if(p){let f=p.cloneNode(!0),u=fn(f);f.nodeName==="LI"&&(f.style.display="inline"),!["SUP","SUB"].includes(f.nodeName)&&!en.includes(u.nodeName)&&(u.innerText=l),i.appendChild(f)}else i.appendChild(document.createTextNode(l))}}),this.emptyContainer(),a){let s=document.createElement(Se);s.appendChild(i),this.translatedContainer.appendChild(s)}else{this.translatedContainer.appendChild(document.createElement("br"));let s=document.createElement(Ct);s.appendChild(i),this.translatedContainer.appendChild(s)}}parseTranslatedText(n){let a=this.SEPARATOR_REG,t=[],o=n.replace(a,(i,s,l,p,f)=>(s&&t.push({text:s.replace(this.TAG_REG,"")}),p&&(l===f?t.push({index:l,text:p}):t.push({text:p.replace(this.TAG_REG,"")})),""));return o&&t.push({text:o.replace(this.TAG_REG,"")}),t}mount(){if(this.translatedContainer.isConnected)return;this.clearUnusedTranslatedContainer();let n=this.textNodes[this.textNodes.length-1];if(this.textNodes.length===1)Nt(this.translatedContainer,n);else{let a=un(n);Nt(this.translatedContainer,a||n)}}unmount(){this.translatedContainer.remove(),this.ob?.disconnect(),this.ob=null}remount(){this.visible?this.mount():this.observeIntersection()}refresh(){this.emptyContainer(),this.visible=!1,this.observeIntersection()}emptyContainer(){this.translatedContainer.isConnected?this.translatedContainer.childNodes.forEach(n=>n.remove()):this.translatedContainer=this.createTranslatedContainer()}createTranslatedContainer(){let n=document.createElement(I);return n.dataset.urlId=this.urlId,n}clearUnusedTranslatedContainer(){let n=`${I}:not([data-url-id="${this.urlId}"])`,a=this.blockContainer.querySelectorAll(n);a.length&&a.forEach(t=>t.remove())}};var Je=ft.sidebarShortcut,Qe=ct,pn=window.top!==window;function Xe(r,e){r.key=e.key,r.keyCode=e.keyCode,r.metaKey=e.metaKey,r.ctrlKey=e.ctrlKey,r.altKey=e.altKey,r.shiftKey=e.shiftKey}function dn(r){if(r.sidebarShortcut){let e=r.sidebarShortcut.newValue||ft.sidebarShortcut;Xe(Je,e)}if(r.translatorShortcut){let e=r.translatorShortcut.newValue||ct;Xe(Qe,e)}}async function gn(r){if(!r.isComposing){if(r.key==="Escape"){let e=Symbol.for("sider.comboboxOpen");if(Reflect.get(window,e))return;M.default.runtime.id&&M.default.runtime.sendMessage({type:"POPUP_OPEN",isShow:!1});return}if(dt(r,Je)){r.preventDefault(),r.stopPropagation(),r.stopImmediatePropagation();let{sidebarMode:e}=await M.default.storage.local.get({sidebarMode:"sidepanel"});e==="sidepanel"?await M.default.runtime.sendMessage({type:"GET_IS_SIDEPANEL_OPEN"})?M.default.runtime.sendMessage({type:"CLOSE_SIDEPANEL"}):M.default.runtime.sendMessage({type:"OPEN_SIDEPANEL"}).then(a=>{a||M.default.runtime.sendMessage({type:"POPUP_OPEN"})}):M.default.runtime.id&&M.default.runtime.sendMessage({type:"POPUP_OPEN"})}dt(r,Qe)&&(r.preventDefault(),r.stopPropagation(),r.stopImmediatePropagation(),M.default.runtime.id&&M.default.runtime.sendMessage({type:"TOGGLE_TRANSLATOR"}))}}var hn="ALL_FRAMES_LISTEN",qe=[];function xn(r=window){r.addEventListener("keydown",gn,!0),r[hn]=!0}function yn(r=window){r.removeEventListener("keydown",gn,!0)}function mn(r){[document,document.querySelector("chatgpt-sidebar")?.shadowRoot].forEach(n=>{n&&n.querySelectorAll("iframe").forEach(a=>{let t=a.contentWindow;try{t&&t[hn]!=!0&&(xn(t),qe.push(()=>yn(t)))}catch{}})})}async function Wo(){M.default.storage.local.get({sidebarShortcut:Je,translatorShortcut:Qe}).then(({sidebarShortcut:e,translatorShortcut:n})=>{Xe(Je,e),Xe(Qe,n)}),M.default.storage.local.onChanged.addListener(dn),window.addEventListener("blur",mn),qe.push(()=>M.default.storage.local.onChanged.removeListener(dn)),qe.push(()=>window.removeEventListener("blur",mn)),xn(),qe.push(()=>yn());let r=new Te;if(pn){let e=await Ne({type:"SHOULD_I_TRANSLATE_PAGE"});e&&r.translate(e.toCode,e.fromCode)}M.default.runtime.onMessage.addListener(e=>{if(pn&&Or(e,"PAGETRANSLAE_ACTION")){let{action:n,toCode:a,fromCode:t}=e.data;switch(n){case"translate":r.translate(a,t);break;case"reset":r.reset();break;case"clear":r.clear();break;default:break}}})}Wo();})();
